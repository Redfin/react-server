FROM node:6.3.0

WORKDIR /usr/src/
RUN git clone https://github.com/redfin/react-server.git
WORKDIR /usr/src/react-server
RUN git checkout hackathon-website

RUN npm run bootstrap

WORKDIR /usr/src/react-server/packages/react-server-website

COPY components/doc-body.js components/
RUN npm run build-assets
RUN mkdir -p /www/assets
RUN cp __clientTemp/build/* /www/assets/

VOLUME /www/assets

EXPOSE 3010 3011

CMD [ "npm", "start" ]
